name: Generate Subscriptions

on:
  workflow_dispatch:
    inputs:
      base_name_suffix:
        description: 'Ù†Ø§Ù…ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ù‡ Ø§Ù†ØªÙ‡Ø§ÛŒ Ù†Ø§Ù… Ø³Ø§Ø¨â€ŒÙ‡Ø§ Ùˆ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯ (Ù…Ø«Ù„Ø§Ù‹ ALI)'
        required: true
        default: 'suffix' # ØªØºÛŒÛŒØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ù‡ ÛŒÚ© Ù†Ø§Ù… Ø¹Ù…ÙˆÙ…ÛŒ
        type: string
      config_index: # ğŸŒŸ ÙˆØ±ÙˆØ¯ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯
        description: 'Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ù‡ Ø³Ø§Ø¨ ØªØ¨Ø¯ÛŒÙ„ Ø´ÙˆØ¯ (Ù…Ø«Ù„Ø§Ù‹ 1 Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯ Ø§ÙˆÙ„)'
        required: true
        default: '1'
        type: string 

jobs:
  generate:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - name: Run Subscriptions Generator Script
      id: generate
      run: node .github/workflows/generate.js
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        CONFIG_URL: "https://raw.githubusercontent.com/pooriaredorg/pooriaredorg/refs/heads/main/configs/proxy_configs.txt"
        
        CONFIG_NAME_SUFFIX: ${{ github.event.inputs.base_name_suffix }} 
        CONFIG_INDEX: ${{ github.event.inputs.config_index }} # ğŸŒŸ Ø§Ø±Ø³Ø§Ù„ Ø´Ù…Ø§Ø±Ù‡ Ø¨Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
