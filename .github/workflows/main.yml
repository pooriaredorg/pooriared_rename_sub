name: ğŸ”„ Rename Subscription Links

on:
  # Ø§ÛŒÙ† Ø¨Ø®Ø´ "Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ" Ø´Ù…Ø§Ø³Øª Ú©Ù‡ Ø§Ù…Ú©Ø§Ù† Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ Ùˆ Ú¯Ø±ÙØªÙ† ÙˆØ±ÙˆØ¯ÛŒ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯
  workflow_dispatch:
    inputs:
      sub_url:
        description: 'Ù„ÛŒÙ†Ú© Ø³Ø§Ø¨Ø³Ú©Ø±ÛŒÙ¾Ø´Ù† Ø§ØµÙ„ÛŒ (Base64)'
        required: true
      new_names:
        description: 'Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ (Ù‡Ø± Ù†Ø§Ù… Ø¯Ø± ÛŒÚ© Ø®Ø· Ø¬Ø¯ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆØ¯)'
        required: true
        default: 'Server 1\nServer 2\nServer 3' # Ù…Ø«Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø³Ù‡ÙˆÙ„Øª Ø§Ø³ØªÙØ§Ø¯Ù‡

jobs:
  rename_and_update:
    runs-on: ubuntu-latest
    
    steps:
      - name: â¬‡ï¸ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ Set up Python 3.x
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'

      - name: ğŸ“¦ Install dependencies (requests)
        run: pip install requests

      - name: ğŸš€ Run Python Script to Rename
        run: python rename_sub.py
        env:
          # Ø§Ø±Ø³Ø§Ù„ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…ØªØºÛŒØ± Ù…Ø­ÛŒØ·ÛŒ Ø¨Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
          SUB_URL: ${{ github.event.inputs.sub_url }}
          NEW_NAMES: ${{ github.event.inputs.new_names }}

      - name: ğŸ’¾ Commit and push new subscription file
        # Ø§Ø² ÛŒÚ© Ø§Ú©Ø´Ù† Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Commit Ø®ÙˆØ¯Ú©Ø§Ø± ÙØ§ÛŒÙ„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: custom_sub.txt
          commit_message: 'Update custom_sub.txt with renamed configs'
          branch: main # ÛŒØ§ masterØŒ Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ù†Ø§Ù… Ø´Ø§Ø®Ù‡ Ø§ØµÙ„ÛŒ Ø´Ù…Ø§
